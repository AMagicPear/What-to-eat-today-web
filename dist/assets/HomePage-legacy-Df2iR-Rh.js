System.register(["./index-legacy-Ds_Q3uzx.js","./foodConstructor-legacy-WY7_ve63.js"],(function(e,l){"use strict";var n,a,t,o,u,s,i,c,g,r,v,d,m,f,h,w,p,_,y,b,x,k,C,j,D;return{setters:[e=>{n=e.r,a=e.c,t=e.t,o=e._,u=e.d,s=e.o,i=e.a,c=e.w,g=e.u,r=e.b,v=e.e,d=e.I,m=e.f,f=e.g,h=e.h,w=e.i,p=e.j,_=e.k,y=e.l,b=e.m,x=e.n,k=e.p,C=e.q},e=>{j=e.s,D=e.F}],execute:function(){var F=document.createElement("style");F.textContent="ion-note[data-v-f4882aa0]{display:block}ion-button[data-v-f4882aa0]{margin:18px 0}\n",document.head.appendChild(F);const L=n([]),N=n(new Date),{foodList:I,loadFoods:S,saveFoods:E}=D(),{saveLog:H}=((async()=>{const e=await j.get("log");L.value=e?e.map((e=>({...e,time:new Date(e.time)}))):[],console.log("已读取记录"),console.log(L.value)})(),{saveLog:async e=>{const l={time:N.value,name:e};L.value.push(l),await j.set("log",JSON.parse(JSON.stringify(L.value))),console.log("成功保存记录")}}),J=a((()=>{const e=N.value.getHours();return e>=6&&e<9?"早":e>=9&&e<11?"早中":e>=11&&e<14?"午":"晚"})),O=async()=>{const e=await(async()=>{await S();const{isCheckBoxDisabled:e,checkedList:n}=await o((()=>l.import("./EditFood-legacy-BYFPAtwN.js")),void 0);let a=e.value?I.value:I.value.filter(((e,l)=>n.value[l]));if(console.log("第一次筛选后的食物："),console.log(a),L.value.length>=2&&(console.log("最后两项：",L.value[L.value.length-1].name,L.value[L.value.length-2].name),a.length>2&&L.value[L.value.length-1].name===L.value[L.value.length-2].name&&(a=a.filter((e=>e.name!==L.value[L.value.length-1].name)),console.log("第二次筛选后的食物："),console.log(a))),e.value&&L.value.length>=30){const e=L.value.slice(-30).map((e=>e.name)),l=a.filter((l=>!e.includes(l.name)));l.length>0&&(a=l),console.log("第三次筛选后的食物："),console.log(a)}return a.map((e=>{let l=0;return l="早"===J.value?e.weight.morning:"早中"===J.value?(e.weight.morning+e.weight.noon)/2:"午"===J.value?e.weight.noon:e.weight.evening,{name:e.name,weight:l}}))})();console.log("正在选择食物，当前可选食物列表："),console.log(e);const n=e.reduce(((e,l)=>e+Number(l.weight)),0);if(console.log(`当前总重：${n}`),0===n)return await(await t.create({message:"当前时段所有可选食物的概率都为零，无法选择！",duration:2e3})).present(),null;const a=((e,l)=>{let n=Math.random()*l;for(const a of e)if(n-=Number(a.weight),n<=0)return a;return null})(e,n);if(a){const e=I.value.find((e=>e.name===a.name));e&&(console.log("选择了："),e.counts+=1,await E(),console.log(e),console.log("目前的食物列表："),console.log(I.value),await H(e.name))}return a};function q(){N.value=new Date}e("default",C(u({__name:"HomePage",setup(e){s((()=>{setInterval(q,6e4)}));const l=n();return(e,n)=>(r(),i(g(k),null,{default:c((()=>[v(g(h),null,{default:c((()=>[v(g(d),null,{default:c((()=>[v(g(m),null,{default:c((()=>n[1]||(n[1]=[f("今天吃什么")]))),_:1})])),_:1})])),_:1}),v(g(x),{class:"ion-padding"},{default:c((()=>[v(g(w),null,{default:c((()=>[f(p(g(N)),1)])),_:1}),v(g(_),{onClick:n[0]||(n[0]=e=>g(O)().then((e=>l.value=e)))},{default:c((()=>n[2]||(n[2]=[f("选择食物")]))),_:1}),n[4]||(n[4]=y("br",null,null,-1)),v(g(b),null,{default:c((()=>[f("今天的"+p(g(J))+"饭要吃的食物是：",1),n[3]||(n[3]=y("br",null,null,-1))])),_:1}),v(g(b),{style:{"text-align":"center"}},{default:c((()=>{var e;return[f(p(null===(e=l.value)||void 0===e?void 0:e.name),1)]})),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-f4882aa0"]]))}}}));
