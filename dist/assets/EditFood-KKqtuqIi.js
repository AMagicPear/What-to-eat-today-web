import{d as A,r as c,i as H,j as p,f as t,u as o,o as u,e as n,k as P,l as S,g as s,m as V,y as z,z as h,s as N,A as f,B as G,a as W,C,F as k,v as j,D as _,b as q,p as J,E as K,G as v,H as Q,J as U,K as X,L as Y,x as Z,M as ee,q as m,N as oe,O as ne,P as le,Q as y,R as te,S as ae,T as se,h as ie}from"./index-DSCgFSIg.js";import{F as re}from"./foodConstructor-B5Rh9AyU.js";const{foodList:r,addFood:de,loadFoods:ue,deleteFood:ge,saveFoods:w}=re(),i=c(null),d=c([]),x=c(!0),fe=A({__name:"EditFood",setup(me){const F="TIP：点击右侧+号添加食物 滑动来编辑或删除<br/>所占权重越大，食物被选中的几率更高",I=c(!1),E=[{text:"取消",role:"cancel",handler:()=>{i.value=null,console.log("已取消添加食物")}},{text:"添加",handler:async e=>e.foodName&&e.foodWeightMorning&&e.foodWeightNoon&&e.foodWeightEvening?e.foodWeightMorning<0||e.foodWeightNoon<0||e.foodWeightEvening<0?(i.value="权重不能是负数！",!1):(console.log("准备添加食物".concat(e.foodName)),await de(e.foodName,{morning:Number(e.foodWeightMorning),noon:Number(e.foodWeightNoon),evening:Number(e.foodWeightEvening)})?(i.value="".concat(e.foodName,"添加成功！"),!0):!1):(console.log("食物未输入"),i.value="请输入食物名称和权重后再提交",!1)}],B=[{name:"foodName",placeholder:"食物名称"},{name:"foodWeightMorning",type:"number",placeholder:"权重：早",min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重：午",min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重：晚",min:0}],M=async e=>{console.log("正在编辑食物"),await(await se.create({header:"编辑食物",inputs:[{name:"foodName",placeholder:"食物名称",value:e.name},{name:"foodWeightMorning",type:"number",placeholder:"权重",value:e.weight.morning,min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重",value:e.weight.noon,min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重",value:e.weight.evening,min:0}],buttons:[{text:"取消",role:"cancel"},{text:"保存",handler:async a=>{a.foodName&&a.foodWeightMorning&&a.foodWeightNoon&&a.foodWeightEvening&&(e.name=a.foodName,e.weight.morning=a.foodWeightMorning,e.weight.noon=a.foodWeightNoon,e.weight.evening=a.foodWeightEvening,await w())}}]})).present()},T=e=>{switch(e){case"morning":return"早";case"noon":return"午";case"evening":return"晚";default:return""}};H(()=>{ue().then(()=>{console.log("加载食物列表："),console.log(r.value),d.value=new Array(r.value.length).fill(!1)})});const $=e=>{console.log("".concat(r.value[e.detail.from].name,"移到了位置").concat(e.detail.to));const l=d.value.splice(e.detail.from,1)[0];d.value.splice(e.detail.to,0,l),r.value=e.detail.complete(r.value),w()},L=e=>{I.value=!e.detail.checked},D=e=>{x.value=!e.detail.checked},O=(e,l)=>{d.value[e]=!d.value[e],console.log("".concat(l," 已").concat(d.value[e]?"选中":"取消勾选","."))};return(e,l)=>(u(),p(o(Z),null,{default:t(()=>[n(o(V),null,{default:t(()=>[n(o(P),null,{default:t(()=>[n(o(S),null,{default:t(()=>l[2]||(l[2]=[s("编辑食物信息")])),_:1})]),_:1})]),_:1}),n(o(j),null,{default:t(()=>[n(o(z),{inset:!0},{default:t(()=>[n(o(h),{style:{"font-weight":"bold"}},{default:t(()=>[n(o(N),null,{default:t(()=>l[3]||(l[3]=[s("食物")])),_:1}),n(o(f),{slot:"end"},{default:t(()=>l[4]||(l[4]=[s("所占权重")])),_:1}),n(o(f),{slot:"end",color:"secondary"},{default:t(()=>l[5]||(l[5]=[s("已选次数")])),_:1})]),_:1}),n(o(G),{disabled:I.value,onIonItemReorder:l[0]||(l[0]=a=>$(a))},{default:t(()=>[(u(!0),W(k,null,C(o(r),(a,R)=>(u(),p(o(ee),{key:a.name},{default:t(()=>[n(o(h),null,{default:t(()=>[n(o(N),null,{default:t(()=>[s(m(a.name),1)]),_:2},1024),n(o(oe),{slot:"end",disabled:x.value,onIonChange:g=>O(R,a.name)},null,8,["disabled","onIonChange"]),n(o(ne),{slot:"end"}),(u(!0),W(k,null,C(a.weight,(g,b)=>(u(),p(o(f),{slot:"end",key:b},{default:t(()=>[s(m(T(b))+" "+m(g),1)]),_:2},1024))),128)),n(o(f),{slot:"end",color:"secondary"},{default:t(()=>[s(m(a.counts),1)]),_:2},1024)]),_:2},1024),n(o(le),{side:"end"},{default:t(()=>[n(o(y),{onClick:g=>M(a)},{default:t(()=>[n(o(v),{slot:"end",icon:o(te)},null,8,["icon"]),l[6]||(l[6]=s("编辑"))]),_:2},1032,["onClick"]),n(o(y),{color:"danger",expandable:"",onClick:g=>o(ge)(a.name)},{default:t(()=>[n(o(v),{slot:"end",icon:o(ae)},null,8,["icon"]),l[7]||(l[7]=s("删除"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["disabled"])]),_:1})]),_:1}),n(o(h),null,{default:t(()=>[n(o(_),{class:"ion-padding","enable-on-off-labels":!0,checked:!0,onIonChange:L},{default:t(()=>l[8]||(l[8]=[s("开启排序")])),_:1}),n(o(_),{class:"ion-padding","enable-on-off-labels":!0,checked:!1,onIonChange:D},{default:t(()=>l[9]||(l[9]=[s("开启选择")])),_:1})]),_:1}),n(o(J),{class:"ion-padding",style:{"text-align":"center"}},{default:t(()=>[q("span",{innerHTML:F})]),_:1}),n(o(U),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"add-button"},{default:t(()=>[n(o(K),null,{default:t(()=>[n(o(v),{icon:o(Q)},null,8,["icon"])]),_:1})]),_:1}),n(o(X),{header:"添加食物",trigger:"add-button",buttons:E,inputs:B}),n(o(Y),{"is-open":i.value,message:i.value,duration:2e3,onDidDismiss:l[1]||(l[1]=a=>i.value=null)},null,8,["is-open","message"])]),_:1}))}}),he=ie(fe,[["__scopeId","data-v-7a5173b0"]]);export{d as checkedList,he as default,x as isCheckBoxDisabled,i as message};
