System.register(["./index-legacy-DtS4MTji.js","./foodConstructor-legacy-DNT0yHju.js"],(function(e,n){"use strict";var o,l,a,t,d,i,u,s,c,r,g,f,h,m,v,p,b,_,y,W,N,w,k,C,x,E,I,M,F,$,D,j,L,z,A,B,H,T,q,G,J,K,P;return{setters:[e=>{o=e.d,l=e.r,a=e.o,t=e.c,d=e.w,i=e.u,u=e.a,s=e.b,c=e.I,r=e.e,g=e.f,f=e.g,h=e.m,m=e.n,v=e.i,p=e.p,b=e.q,_=e.s,y=e.v,W=e.F,N=e.k,w=e.x,k=e.j,C=e.h,x=e.y,E=e.z,I=e.A,M=e.B,F=e.C,$=e.D,D=e.l,j=e.E,L=e.t,z=e.G,A=e.H,B=e.J,H=e.K,T=e.L,q=e.M,G=e.N,J=e._},e=>{K=e.f,P=e.F}],execute:function(){var n=document.createElement("style");n.textContent="#add-button[data-v-d3dcb548]{margin:2vw}ion-note[data-v-d3dcb548]{display:block}\n",document.head.appendChild(n);const{addFood:R,loadFoods:S,deleteFood:O,saveFoods:Q}=P(),U=e("message",l(null)),V=e("checkedList",l([])),X=e("isCheckBoxDisabled",l(!0));e("default",J(o({__name:"EditFood",setup(e){const n=l(!1),o=[{text:"取消",role:"cancel",handler:()=>{U.value=null,console.log("已取消添加食物")}},{text:"添加",handler:async e=>e.foodName&&e.foodWeightMorning&&e.foodWeightNoon&&e.foodWeightEvening?e.foodWeightMorning<0||e.foodWeightNoon<0||e.foodWeightEvening<0?(U.value="权重不能是负数！",!1):(console.log(`准备添加食物${e.foodName}`),!!(await R(e.foodName,{morning:Number(e.foodWeightMorning),noon:Number(e.foodWeightNoon),evening:Number(e.foodWeightEvening)}))&&(U.value=`${e.foodName}添加成功！`,!0)):(console.log("食物未输入"),U.value="请输入食物名称和权重后再提交",!1)}],J=[{name:"foodName",placeholder:"食物名称"},{name:"foodWeightMorning",type:"number",placeholder:"权重：早",min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重：午",min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重：晚",min:0}],P=e=>{switch(e){case"morning":return"早";case"noon":return"午";case"evening":return"晚";default:return""}};a((()=>{S().then((()=>{console.log("加载食物列表："),console.log(K.value),V.value=new Array(K.value.length).fill(!1)}))}));const Y=e=>{n.value=!e.detail.checked},Z=e=>{X.value=!e.detail.checked};return(e,l)=>(u(),t(i(D),null,{default:d((()=>[s(i(f),null,{default:d((()=>[s(i(c),null,{default:d((()=>[s(i(r),null,{default:d((()=>l[2]||(l[2]=[g("编辑食物信息")]))),_:1})])),_:1})])),_:1}),s(i(N),null,{default:d((()=>[s(i(h),{inset:!0},{default:d((()=>[s(i(m),{style:{"font-weight":"bold"}},{default:d((()=>[s(i(v),null,{default:d((()=>l[3]||(l[3]=[g("食物")]))),_:1}),s(i(p),{slot:"end"},{default:d((()=>l[4]||(l[4]=[g("所占权重")]))),_:1}),s(i(p),{slot:"end",color:"secondary"},{default:d((()=>l[5]||(l[5]=[g("已选次数")]))),_:1})])),_:1}),s(i(b),{disabled:n.value,onIonItemReorder:l[0]||(l[0]=e=>(e=>{console.log(`${K.value[e.detail.from].name}移到了位置${e.detail.to}`);const n=V.value.splice(e.detail.from,1)[0];V.value.splice(e.detail.to,0,n),K.value=e.detail.complete(K.value),Q()})(e))},{default:d((()=>[(u(!0),_(W,null,y(i(K),((e,n)=>(u(),t(i(j),{key:e.name},{default:d((()=>[s(i(m),null,{default:d((()=>[s(i(v),null,{default:d((()=>[g(L(e.name),1)])),_:2},1024),s(i(z),{slot:"end",disabled:X.value,onIonChange:o=>((e,n)=>{V.value[e]=!V.value[e],console.log(`${n} 已${V.value[e]?"选中":"取消勾选"}.`)})(n,e.name)},null,8,["disabled","onIonChange"]),s(i(A),{slot:"end"}),(u(!0),_(W,null,y(e.weight,((e,n)=>(u(),t(i(p),{slot:"end",key:n},{default:d((()=>[g(L(P(n))+" "+L(e),1)])),_:2},1024)))),128)),s(i(p),{slot:"end",color:"secondary"},{default:d((()=>[g(L(e.counts),1)])),_:2},1024)])),_:2},1024),s(i(B),{side:"end"},{default:d((()=>[s(i(H),{onClick:n=>(async e=>{console.log("正在编辑食物");const n=await G.create({header:"编辑食物",inputs:[{name:"foodName",placeholder:"食物名称",value:e.name},{name:"foodWeightMorning",type:"number",placeholder:"权重",value:e.weight.morning,min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重",value:e.weight.noon,min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重",value:e.weight.evening,min:0}],buttons:[{text:"取消",role:"cancel"},{text:"保存",handler:async n=>{n.foodName&&n.foodWeightMorning&&n.foodWeightNoon&&n.foodWeightEvening&&(e.name=n.foodName,e.weight.morning=n.foodWeightMorning,e.weight.noon=n.foodWeightNoon,e.weight.evening=n.foodWeightEvening,await Q())}}]});await n.present()})(e)},{default:d((()=>[s(i(E),{slot:"end",icon:i(T)},null,8,["icon"]),l[6]||(l[6]=g("编辑"))])),_:2},1032,["onClick"]),s(i(H),{color:"danger",expandable:"",onClick:n=>i(O)(e.name)},{default:d((()=>[s(i(E),{slot:"end",icon:i(q)},null,8,["icon"]),l[7]||(l[7]=g("删除"))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["disabled"])])),_:1})])),_:1}),s(i(m),null,{default:d((()=>[s(i(w),{class:"ion-padding","enable-on-off-labels":!0,checked:!0,onIonChange:Y},{default:d((()=>l[8]||(l[8]=[g("开启排序")]))),_:1}),s(i(w),{class:"ion-padding","enable-on-off-labels":!0,checked:!1,onIonChange:Z},{default:d((()=>l[9]||(l[9]=[g("开启选择")]))),_:1})])),_:1}),s(i(C),{class:"ion-padding",style:{"text-align":"center"}},{default:d((()=>[k("span",{innerHTML:"TIP：点击右侧+号添加食物 滑动来编辑或删除<br/>所占权重越大，食物被选中的几率更高"})])),_:1}),s(i(M),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"add-button"},{default:d((()=>[s(i(x),null,{default:d((()=>[s(i(E),{icon:i(I)},null,8,["icon"])])),_:1})])),_:1}),s(i(F),{header:"添加食物",trigger:"add-button",buttons:o,inputs:J}),s(i($),{"is-open":U.value,message:U.value,duration:2e3,onDidDismiss:l[1]||(l[1]=e=>U.value=null)},null,8,["is-open","message"])])),_:1}))}}),[["__scopeId","data-v-d3dcb548"]]))}}}));
