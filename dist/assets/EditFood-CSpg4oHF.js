import{d as E,r as c,o as B,a as v,w as l,u as e,b as g,e as o,I as M,f as T,g as s,h as $,q as D,s as f,m as I,v as d,x as L,y as O,z as R,F as H,n as P,A as b,l as V,i as z,B as A,C as m,D as G,E as S,G as j,H as q,p as J,J as K,j as r,K as Q,L as U,M as X,N as W,O as Y,P as Z,Q as ee,_ as oe}from"./index-CEE-q8wp.js";import{F as ne}from"./foodConstructor-HnYgMN58.js";const{foodList:u,addFood:le,loadFoods:te,deleteFood:ae,saveFoods:se}=ne(),i=c(null),ie=E({__name:"EditFood",setup(de){const N="TIP：点击右侧+号添加食物 滑动来编辑或删除<br/>所占权重越大，食物被选中的几率更高",p=c(!1),h=c(!0),_=[{text:"取消",role:"cancel",handler:()=>{i.value=null,console.log("已取消添加食物")}},{text:"添加",handler:async n=>n.foodName&&n.foodWeightMorning&&n.foodWeightNoon&&n.foodWeightEvening?n.foodWeightMorning<0||n.foodWeightNoon<0||n.foodWeightEvening<0?(i.value="权重不能是负数！",!1):(console.log("准备添加食物".concat(n.foodName)),await le(n.foodName,{morning:n.foodWeightMorning,noon:n.foodWeightNoon,evening:n.foodWeightEvening})?(i.value="".concat(n.foodName,"添加成功！"),!0):!1):(console.log("食物未输入"),i.value="请输入食物名称和权重后再提交",!1)}],x=[{name:"foodName",placeholder:"食物名称"},{name:"foodWeightMorning",type:"number",placeholder:"权重：早",min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重：午",min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重：晚",min:0}],y=async n=>{console.log("正在编辑食物"),await(await ee.create({header:"编辑食物",inputs:[{name:"foodName",placeholder:"食物名称",value:n.name},{name:"foodWeightMorning",type:"number",placeholder:"权重",value:n.weight.morning,min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重",value:n.weight.noon,min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重",value:n.weight.evening,min:0}],buttons:[{text:"取消",role:"cancel"},{text:"保存",handler:async a=>{a.foodName&&a.foodWeightMorning&&a.foodWeightNoon&&a.foodWeightEvening&&(n.name=a.foodName,n.weight.morning=a.foodWeightMorning,n.weight.noon=a.foodWeightNoon,n.weight.evening=a.foodWeightEvening)}}]})).present()};B(()=>{te().then(()=>{console.log("加载食物列表："),console.log(u.value)})});const k=n=>{console.log("".concat(u.value[n.detail.from].name,"移到了位置").concat(n.detail.to)),u.value=n.detail.complete(u.value),se()},w=n=>{p.value=!n.detail.checked},C=n=>{h.value=!n.detail.checked};return(n,t)=>(g(),v(e(J),null,{default:l(()=>[o(e($),null,{default:l(()=>[o(e(M),null,{default:l(()=>[o(e(T),null,{default:l(()=>t[2]||(t[2]=[s("编辑食物信息")])),_:1})]),_:1})]),_:1}),o(e(P),null,{default:l(()=>[o(e(D),{inset:!0},{default:l(()=>[o(e(f),{style:{"font-weight":"bold"}},{default:l(()=>[o(e(I),null,{default:l(()=>t[3]||(t[3]=[s("食物")])),_:1}),o(e(d),{slot:"end"},{default:l(()=>t[4]||(t[4]=[s("所占权重")])),_:1}),o(e(d),{slot:"end",color:"secondary"},{default:l(()=>t[5]||(t[5]=[s("已选次数")])),_:1})]),_:1}),o(e(L),{disabled:p.value,onIonItemReorder:t[0]||(t[0]=a=>k(a))},{default:l(()=>[(g(!0),O(H,null,R(e(u),a=>(g(),v(e(K),{key:a.name},{default:l(()=>[o(e(f),null,{default:l(()=>[o(e(I),null,{default:l(()=>[s(r(a.name),1)]),_:2},1024),o(e(Q),{slot:"end",disabled:h.value},null,8,["disabled"]),o(e(U),{slot:"end"}),o(e(d),{slot:"end"},{default:l(()=>[s("早 "+r(a.weight.morning),1)]),_:2},1024),o(e(d),{slot:"end"},{default:l(()=>[s("午 "+r(a.weight.noon),1)]),_:2},1024),o(e(d),{slot:"end"},{default:l(()=>[s("晚 "+r(a.weight.evening),1)]),_:2},1024),o(e(d),{slot:"end",color:"secondary"},{default:l(()=>[s(r(a.counts),1)]),_:2},1024)]),_:2},1024),o(e(X),{side:"end"},{default:l(()=>[o(e(W),{onClick:F=>y(a)},{default:l(()=>[o(e(m),{slot:"end",icon:e(Y)},null,8,["icon"]),t[6]||(t[6]=s("编辑"))]),_:2},1032,["onClick"]),o(e(W),{color:"danger",expandable:"",onClick:F=>e(ae)(a.name)},{default:l(()=>[o(e(m),{slot:"end",icon:e(Z)},null,8,["icon"]),t[7]||(t[7]=s("删除"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["disabled"])]),_:1})]),_:1}),o(e(f),null,{default:l(()=>[o(e(b),{class:"ion-padding","enable-on-off-labels":!0,checked:!0,onIonChange:w},{default:l(()=>t[8]||(t[8]=[s("开启排序")])),_:1}),o(e(b),{class:"ion-padding","enable-on-off-labels":!0,checked:!1,onIonChange:C},{default:l(()=>t[9]||(t[9]=[s("开启选择")])),_:1})]),_:1}),o(e(z),{class:"ion-padding",style:{"text-align":"center"}},{default:l(()=>[V("span",{innerHTML:N})]),_:1}),o(e(S),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"add-button"},{default:l(()=>[o(e(A),null,{default:l(()=>[o(e(m),{icon:e(G)},null,8,["icon"])]),_:1})]),_:1}),o(e(j),{header:"添加食物",trigger:"add-button",buttons:_,inputs:x}),o(e(q),{"is-open":i.value,message:i.value,duration:2e3,onDidDismiss:t[1]||(t[1]=a=>i.value=null)},null,8,["is-open","message"])]),_:1}))}}),ge=oe(ie,[["__scopeId","data-v-80004055"]]);export{ge as default,i as message};
