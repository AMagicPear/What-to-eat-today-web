System.register(["./index-legacy-CfgSHEVM.js","./foodConstructor-legacy-BMJw1mud.js"],(function(e,n){"use strict";var t,l,o,a,u,s,c,r,i,g,d,v,f,m,w,h,_,p,y,b,x,C,N,j;return{setters:[e=>{t=e.r,l=e.c,o=e.t,a=e.d,u=e.o,s=e.a,c=e.w,r=e.u,i=e.b,g=e.e,d=e.I,v=e.f,f=e.g,m=e.h,w=e.i,h=e.j,_=e.k,p=e.l,y=e.m,b=e.n,x=e.p,C=e._},e=>{N=e.s,j=e.F}],execute:function(){var n=document.createElement("style");n.textContent="ion-note[data-v-2e6c47cf]{display:block}ion-button[data-v-2e6c47cf]{margin:18px 0}\n",document.head.appendChild(n);const k=t(new Date),{foodList:D,loadFoods:F,saveFoods:I}=j(),{saveLog:L}=(()=>{const e=t([]);return(async()=>{const n=await N.get("log");e.value=n?n.map((e=>({...e,time:new Date(e.time)}))):[],console.log("已读取记录"),console.log(e.value)})(),{saveLog:async n=>{const t={time:k.value,name:n};e.value.push(t),await N.set("log",JSON.parse(JSON.stringify(e.value))),console.log("成功保存记录")}}})(),S=l((()=>{const e=k.value.getHours();return e>=6&&e<9?"早":e>=9&&e<11?"早中":e>=11&&e<14?"午":"晚"})),H=async()=>{const e=await(async()=>(await F(),D.value.map((e=>{let n=0;return n="早"===S.value?e.weight.morning:"早中"===S.value?(e.weight.morning+e.weight.noon)/2:"午"===S.value?e.weight.noon:e.weight.evening,{name:e.name,weight:n}}))))();console.log("正在选择食物，当前可选食物列表："),console.log(e);const n=e.reduce(((e,n)=>e+Number(n.weight)),0);if(console.log(`当前总重：${n}`),0===n)return(await o.create({message:"当前时段所有可选食物的概率都为零，无法选择！",duration:2e3})).present(),null;const t=((e,n)=>{let t=Math.random()*n;for(const l of e)if(t-=Number(l.weight),t<=0)return l;return null})(e,n);if(t){const e=D.value.find((e=>e.name===t.name));e&&(console.log("选择了："),e.counts+=1,I(),console.log(e),console.log("目前的食物列表："),console.log(D.value),L(e.name))}return t};function J(){k.value=new Date}e("default",C(a({__name:"HomePage",setup(e){u((()=>{setInterval(J,6e4)}));const n=t();return(e,t)=>(i(),s(r(x),null,{default:c((()=>[g(r(m),null,{default:c((()=>[g(r(d),null,{default:c((()=>[g(r(v),null,{default:c((()=>t[1]||(t[1]=[f("今天吃什么")]))),_:1})])),_:1})])),_:1}),g(r(b),{class:"ion-padding"},{default:c((()=>[g(r(w),null,{default:c((()=>[f(h(r(k)),1)])),_:1}),g(r(_),{onClick:t[0]||(t[0]=e=>r(H)().then((e=>n.value=e)))},{default:c((()=>t[2]||(t[2]=[f("选择食物")]))),_:1}),t[4]||(t[4]=p("br",null,null,-1)),g(r(y),null,{default:c((()=>[f("今天的"+h(r(S))+"饭要吃的食物是：",1),t[3]||(t[3]=p("br",null,null,-1))])),_:1}),g(r(y),{style:{"text-align":"center"}},{default:c((()=>{var e;return[f(h(null===(e=n.value)||void 0===e?void 0:e.name),1)]})),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-2e6c47cf"]]))}}}));
