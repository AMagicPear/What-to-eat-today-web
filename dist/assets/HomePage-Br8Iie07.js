const __vite__fileDeps=["assets/EditFood-DZHdmnGM.js","assets/index-CpAgIRb8.js","assets/index-7CQuqmcz.css","assets/foodConstructor-9Mz1bIG8.js","assets/EditFood-DdfLmwIF.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as f,c as I,t as L,_ as h,d as y,o as N,a as b,w as s,u as n,b as x,e as l,I as B,f as C,g as i,h as k,i as D,j as m,k as P,l as p,m as _,n as T,p as V,q as H}from"./index-CpAgIRb8.js";import{s as F,F as W}from"./foodConstructor-9Mz1bIG8.js";const O=()=>{const t=f([]),a=async e=>{const o={time:c.value,name:e};t.value.push(o),await F.set("log",JSON.parse(JSON.stringify(t.value))),console.log("成功保存记录")};return(async()=>{const e=await F.get("log");t.value=e?e.map(o=>({...o,time:new Date(o.time)})):[],console.log("已读取记录"),console.log(t.value)})(),{saveLog:a}},c=f(new Date),{foodList:d,loadFoods:S,saveFoods:E}=W(),{saveLog:J}=O(),M=async()=>{await S();const{isCheckBoxDisabled:t,checkedList:a}=await h(()=>import("./EditFood-DZHdmnGM.js"),__vite__mapDeps([0,1,2,3,4]));return(t.value?d.value:d.value.filter((e,o)=>a.value[o])).map(e=>{let o=0;return u.value==="早"?o=e.weight.morning:u.value==="早中"?o=(e.weight.morning+e.weight.noon)/2:u.value==="午"?o=e.weight.noon:o=e.weight.evening,{name:e.name,weight:o}})},u=I(()=>{const t=c.value.getHours();return t>=6&&t<9?"早":t>=9&&t<11?"早中":t>=11&&t<14?"午":"晚"}),$=async()=>{const t=await M();console.log("正在选择食物，当前可选食物列表："),console.log(t);const a=t.reduce((o,r)=>o+Number(r.weight),0);if(console.log("当前总重：".concat(a)),a===0)return await(await L.create({message:"当前时段所有可选食物的概率都为零，无法选择！",duration:2e3})).present(),null;const e=((o,r)=>{let v=Math.random()*r;for(const w of o)if(v-=Number(w.weight),v<=0)return w;return null})(t,a);if(e){const o=d.value.find(r=>r.name===e.name);o&&(console.log("选择了："),o.counts+=1,await E(),console.log(o),console.log("目前的食物列表："),console.log(d.value),await J(o.name))}return e};function j(){c.value=new Date}const q=y({__name:"HomePage",setup(t){N(()=>{setInterval(j,6e4)});const a=f();return(g,e)=>(x(),b(n(V),null,{default:s(()=>[l(n(k),null,{default:s(()=>[l(n(B),null,{default:s(()=>[l(n(C),null,{default:s(()=>e[1]||(e[1]=[i("今天吃什么")])),_:1})]),_:1})]),_:1}),l(n(T),{class:"ion-padding"},{default:s(()=>[l(n(D),null,{default:s(()=>[i(m(n(c)),1)]),_:1}),l(n(P),{onClick:e[0]||(e[0]=o=>n($)().then(r=>a.value=r))},{default:s(()=>e[2]||(e[2]=[i("选择食物")])),_:1}),e[4]||(e[4]=p("br",null,null,-1)),l(n(_),null,{default:s(()=>[i("今天的"+m(n(u))+"饭要吃的食物是：",1),e[3]||(e[3]=p("br",null,null,-1))]),_:1}),l(n(_),{style:{"text-align":"center"}},{default:s(()=>{var o;return[i(m((o=a.value)==null?void 0:o.name),1)]}),_:1})]),_:1})]),_:1}))}}),z=H(q,[["__scopeId","data-v-2e6c47cf"]]);export{z as default};
