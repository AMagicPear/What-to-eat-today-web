System.register(["./index-legacy--wmzhMMv.js","./foodConstructor-legacy-Dip_hkq4.js"],(function(e,o){"use strict";var n,l,a,t,d,i,u,s,c,r,g,f,h,m,v,p,b,_,y,W,N,w,k,C,x,E,M,I,F,$,D,L,j,T,z,A,B,H,P,R,S,q;return{setters:[e=>{n=e.d,l=e.r,a=e.i,t=e.j,d=e.f,i=e.u,u=e.o,s=e.e,c=e.k,r=e.l,g=e.g,f=e.m,h=e.y,m=e.z,v=e.s,p=e.A,b=e.B,_=e.a,y=e.C,W=e.F,N=e.v,w=e.D,k=e.b,C=e.p,x=e.E,E=e.G,M=e.H,I=e.J,F=e.K,$=e.L,D=e.x,L=e.M,j=e.q,T=e.N,z=e.O,A=e.P,B=e.Q,H=e.R,P=e.S,R=e.T,S=e.h},e=>{q=e.F}],execute:function(){var o=document.createElement("style");o.textContent="#add-button[data-v-7a5173b0]{margin:2vw}ion-note[data-v-7a5173b0]{display:block}\n",document.head.appendChild(o);const{foodList:G,addFood:J,loadFoods:K,deleteFood:O,saveFoods:Q}=q(),U=e("message",l(null)),V=e("checkedList",l([])),X=e("isCheckBoxDisabled",l(!0));e("default",S(n({__name:"EditFood",setup(e){const o=l(!1),n=[{text:"取消",role:"cancel",handler:()=>{U.value=null,console.log("已取消添加食物")}},{text:"添加",handler:async e=>e.foodName&&e.foodWeightMorning&&e.foodWeightNoon&&e.foodWeightEvening?e.foodWeightMorning<0||e.foodWeightNoon<0||e.foodWeightEvening<0?(U.value="权重不能是负数！",!1):(console.log(`准备添加食物${e.foodName}`),!!(await J(e.foodName,{morning:Number(e.foodWeightMorning),noon:Number(e.foodWeightNoon),evening:Number(e.foodWeightEvening)}))&&(U.value=`${e.foodName}添加成功！`,!0)):(console.log("食物未输入"),U.value="请输入食物名称和权重后再提交",!1)}],S=[{name:"foodName",placeholder:"食物名称"},{name:"foodWeightMorning",type:"number",placeholder:"权重：早",min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重：午",min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重：晚",min:0}],q=e=>{switch(e){case"morning":return"早";case"noon":return"午";case"evening":return"晚";default:return""}};a((()=>{K().then((()=>{console.log("加载食物列表："),console.log(G.value),V.value=new Array(G.value.length).fill(!1)}))}));const Y=e=>{o.value=!e.detail.checked},Z=e=>{X.value=!e.detail.checked};return(e,l)=>(u(),t(i(D),null,{default:d((()=>[s(i(f),null,{default:d((()=>[s(i(c),null,{default:d((()=>[s(i(r),null,{default:d((()=>l[2]||(l[2]=[g("编辑食物信息")]))),_:1})])),_:1})])),_:1}),s(i(N),null,{default:d((()=>[s(i(h),{inset:!0},{default:d((()=>[s(i(m),{style:{"font-weight":"bold"}},{default:d((()=>[s(i(v),null,{default:d((()=>l[3]||(l[3]=[g("食物")]))),_:1}),s(i(p),{slot:"end"},{default:d((()=>l[4]||(l[4]=[g("所占权重")]))),_:1}),s(i(p),{slot:"end",color:"secondary"},{default:d((()=>l[5]||(l[5]=[g("已选次数")]))),_:1})])),_:1}),s(i(b),{disabled:o.value,onIonItemReorder:l[0]||(l[0]=e=>(e=>{console.log(`${G.value[e.detail.from].name}移到了位置${e.detail.to}`);const o=V.value.splice(e.detail.from,1)[0];V.value.splice(e.detail.to,0,o),G.value=e.detail.complete(G.value),Q()})(e))},{default:d((()=>[(u(!0),_(W,null,y(i(G),((e,o)=>(u(),t(i(L),{key:e.name},{default:d((()=>[s(i(m),null,{default:d((()=>[s(i(v),null,{default:d((()=>[g(j(e.name),1)])),_:2},1024),s(i(T),{slot:"end",disabled:X.value,onIonChange:n=>((e,o)=>{V.value[e]=!V.value[e],console.log(`${o} 已${V.value[e]?"选中":"取消勾选"}.`)})(o,e.name)},null,8,["disabled","onIonChange"]),s(i(z),{slot:"end"}),(u(!0),_(W,null,y(e.weight,((e,o)=>(u(),t(i(p),{slot:"end",key:o},{default:d((()=>[g(j(q(o))+" "+j(e),1)])),_:2},1024)))),128)),s(i(p),{slot:"end",color:"secondary"},{default:d((()=>[g(j(e.counts),1)])),_:2},1024)])),_:2},1024),s(i(A),{side:"end"},{default:d((()=>[s(i(B),{onClick:o=>(async e=>{console.log("正在编辑食物");const o=await R.create({header:"编辑食物",inputs:[{name:"foodName",placeholder:"食物名称",value:e.name},{name:"foodWeightMorning",type:"number",placeholder:"权重",value:e.weight.morning,min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重",value:e.weight.noon,min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重",value:e.weight.evening,min:0}],buttons:[{text:"取消",role:"cancel"},{text:"保存",handler:async o=>{o.foodName&&o.foodWeightMorning&&o.foodWeightNoon&&o.foodWeightEvening&&(e.name=o.foodName,e.weight.morning=o.foodWeightMorning,e.weight.noon=o.foodWeightNoon,e.weight.evening=o.foodWeightEvening,await Q())}}]});await o.present()})(e)},{default:d((()=>[s(i(E),{slot:"end",icon:i(H)},null,8,["icon"]),l[6]||(l[6]=g("编辑"))])),_:2},1032,["onClick"]),s(i(B),{color:"danger",expandable:"",onClick:o=>i(O)(e.name)},{default:d((()=>[s(i(E),{slot:"end",icon:i(P)},null,8,["icon"]),l[7]||(l[7]=g("删除"))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["disabled"])])),_:1})])),_:1}),s(i(m),null,{default:d((()=>[s(i(w),{class:"ion-padding","enable-on-off-labels":!0,checked:!0,onIonChange:Y},{default:d((()=>l[8]||(l[8]=[g("开启排序")]))),_:1}),s(i(w),{class:"ion-padding","enable-on-off-labels":!0,checked:!1,onIonChange:Z},{default:d((()=>l[9]||(l[9]=[g("开启选择")]))),_:1})])),_:1}),s(i(C),{class:"ion-padding",style:{"text-align":"center"}},{default:d((()=>[k("span",{innerHTML:"TIP：点击右侧+号添加食物 滑动来编辑或删除<br/>所占权重越大，食物被选中的几率更高"})])),_:1}),s(i(I),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"add-button"},{default:d((()=>[s(i(x),null,{default:d((()=>[s(i(E),{icon:i(M)},null,8,["icon"])])),_:1})])),_:1}),s(i(F),{header:"添加食物",trigger:"add-button",buttons:n,inputs:S}),s(i($),{"is-open":U.value,message:U.value,duration:2e3,onDidDismiss:l[1]||(l[1]=e=>U.value=null)},null,8,["is-open","message"])])),_:1}))}}),[["__scopeId","data-v-7a5173b0"]]))}}}));
