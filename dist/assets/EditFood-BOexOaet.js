import{d as R,r as c,o as A,a as p,w as t,u as o,b as u,e as n,I as H,f as P,g as s,h as V,s as z,v as h,m as W,x as f,y as G,z as N,A as C,F as _,n as S,B as k,l as j,i as q,C as J,D as v,E as K,G as Q,H as U,J as X,p as Y,K as Z,j as m,L as ee,M as oe,N as ne,O as y,P as le,Q as te,R as ae,q as se}from"./index-B-9Gt_St.js";import{F as ie}from"./foodConstructor-Csf4jzYi.js";const{foodList:r,addFood:re,loadFoods:de,deleteFood:ue,saveFoods:ge}=ie(),i=c(null),d=c([]),w=c(!0),fe=R({__name:"EditFood",setup(me){const x="TIP：点击右侧+号添加食物 滑动来编辑或删除<br/>所占权重越大，食物被选中的几率更高",I=c(!1),F=[{text:"取消",role:"cancel",handler:()=>{i.value=null,console.log("已取消添加食物")}},{text:"添加",handler:async e=>e.foodName&&e.foodWeightMorning&&e.foodWeightNoon&&e.foodWeightEvening?e.foodWeightMorning<0||e.foodWeightNoon<0||e.foodWeightEvening<0?(i.value="权重不能是负数！",!1):(console.log("准备添加食物".concat(e.foodName)),await re(e.foodName,{morning:e.foodWeightMorning,noon:e.foodWeightNoon,evening:e.foodWeightEvening})?(i.value="".concat(e.foodName,"添加成功！"),!0):!1):(console.log("食物未输入"),i.value="请输入食物名称和权重后再提交",!1)}],E=[{name:"foodName",placeholder:"食物名称"},{name:"foodWeightMorning",type:"number",placeholder:"权重：早",min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重：午",min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重：晚",min:0}],B=async e=>{console.log("正在编辑食物"),await(await ae.create({header:"编辑食物",inputs:[{name:"foodName",placeholder:"食物名称",value:e.name},{name:"foodWeightMorning",type:"number",placeholder:"权重",value:e.weight.morning,min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重",value:e.weight.noon,min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重",value:e.weight.evening,min:0}],buttons:[{text:"取消",role:"cancel"},{text:"保存",handler:async a=>{a.foodName&&a.foodWeightMorning&&a.foodWeightNoon&&a.foodWeightEvening&&(e.name=a.foodName,e.weight.morning=a.foodWeightMorning,e.weight.noon=a.foodWeightNoon,e.weight.evening=a.foodWeightEvening)}}]})).present()},M=e=>{switch(e){case"morning":return"早";case"noon":return"午";case"evening":return"晚";default:return""}};A(()=>{de().then(()=>{console.log("加载食物列表："),console.log(r.value),d.value=new Array(r.value.length).fill(!1)})});const $=e=>{console.log("".concat(r.value[e.detail.from].name,"移到了位置").concat(e.detail.to));const l=d.value.splice(e.detail.from,1)[0];d.value.splice(e.detail.to,0,l),r.value=e.detail.complete(r.value),ge()},T=e=>{I.value=!e.detail.checked},L=e=>{w.value=!e.detail.checked},D=(e,l)=>{d.value[e]=!d.value[e],console.log("".concat(l," 已").concat(d.value[e]?"选中":"取消勾选","."))};return(e,l)=>(u(),p(o(Y),null,{default:t(()=>[n(o(V),null,{default:t(()=>[n(o(H),null,{default:t(()=>[n(o(P),null,{default:t(()=>l[2]||(l[2]=[s("编辑食物信息")])),_:1})]),_:1})]),_:1}),n(o(S),null,{default:t(()=>[n(o(z),{inset:!0},{default:t(()=>[n(o(h),{style:{"font-weight":"bold"}},{default:t(()=>[n(o(W),null,{default:t(()=>l[3]||(l[3]=[s("食物")])),_:1}),n(o(f),{slot:"end"},{default:t(()=>l[4]||(l[4]=[s("所占权重")])),_:1}),n(o(f),{slot:"end",color:"secondary"},{default:t(()=>l[5]||(l[5]=[s("已选次数")])),_:1})]),_:1}),n(o(G),{disabled:I.value,onIonItemReorder:l[0]||(l[0]=a=>$(a))},{default:t(()=>[(u(!0),N(_,null,C(o(r),(a,O)=>(u(),p(o(Z),{key:a.name},{default:t(()=>[n(o(h),null,{default:t(()=>[n(o(W),null,{default:t(()=>[s(m(a.name),1)]),_:2},1024),n(o(ee),{slot:"end",disabled:w.value,onIonChange:g=>D(O,a.name)},null,8,["disabled","onIonChange"]),n(o(oe),{slot:"end"}),(u(!0),N(_,null,C(a.weight,(g,b)=>(u(),p(o(f),{slot:"end",key:b},{default:t(()=>[s(m(M(b))+" "+m(g),1)]),_:2},1024))),128)),n(o(f),{slot:"end",color:"secondary"},{default:t(()=>[s(m(a.counts),1)]),_:2},1024)]),_:2},1024),n(o(ne),{side:"end"},{default:t(()=>[n(o(y),{onClick:g=>B(a)},{default:t(()=>[n(o(v),{slot:"end",icon:o(le)},null,8,["icon"]),l[6]||(l[6]=s("编辑"))]),_:2},1032,["onClick"]),n(o(y),{color:"danger",expandable:"",onClick:g=>o(ue)(a.name)},{default:t(()=>[n(o(v),{slot:"end",icon:o(te)},null,8,["icon"]),l[7]||(l[7]=s("删除"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["disabled"])]),_:1})]),_:1}),n(o(h),null,{default:t(()=>[n(o(k),{class:"ion-padding","enable-on-off-labels":!0,checked:!0,onIonChange:T},{default:t(()=>l[8]||(l[8]=[s("开启排序")])),_:1}),n(o(k),{class:"ion-padding","enable-on-off-labels":!0,checked:!1,onIonChange:L},{default:t(()=>l[9]||(l[9]=[s("开启选择")])),_:1})]),_:1}),n(o(q),{class:"ion-padding",style:{"text-align":"center"}},{default:t(()=>[j("span",{innerHTML:x})]),_:1}),n(o(Q),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"add-button"},{default:t(()=>[n(o(J),null,{default:t(()=>[n(o(v),{icon:o(K)},null,8,["icon"])]),_:1})]),_:1}),n(o(U),{header:"添加食物",trigger:"add-button",buttons:F,inputs:E}),n(o(X),{"is-open":i.value,message:i.value,duration:2e3,onDidDismiss:l[1]||(l[1]=a=>i.value=null)},null,8,["is-open","message"])]),_:1}))}}),he=se(fe,[["__scopeId","data-v-3d5383c9"]]);export{d as checkedList,he as default,w as isCheckBoxDisabled,i as message};
