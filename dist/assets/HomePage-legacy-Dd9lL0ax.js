System.register(["./index-legacy-1ZAwI3e6.js","./foodConstructor-legacy-MMNmvCdv.js"],(function(e,n){"use strict";var o,l,t,a,u,s,r,c,i,g,d,f,m,v,w,_,y,b;return{setters:[e=>{o=e.r,l=e.d,t=e.o,a=e.a,u=e.c,s=e.w,r=e.u,c=e.b,i=e.e,g=e.f,d=e.I,f=e.t,m=e.g,v=e.h,w=e.i,_=e.j},e=>{y=e.s,b=e.F}],execute:function(){const n=()=>{const e=o([]);return{saveLog:async n=>{const o={time:h.value,name:n};e.value.push(o),await y.set("log",JSON.parse(JSON.stringify(e.value))),console.log("成功保存记录")},loadLog:async()=>{const n=await y.get("log");e.value=n?n.map((e=>({...e,time:new Date(e.time)}))):[],console.log("已读取记录"),console.log(e.value)}}},h=o(new Date),{foodList:p,loadFoods:L,saveFoods:N}=b(),{saveLog:j}=n(),x=e=>{const n=e.getHours();return n>=6&&n<9?"morning":n>=9&&n<11?"brunch":n>=11&&n<14?"noon":"evening"},D=async()=>{const e=await(async()=>(await L(),p.value))();console.log("正在选择食物，当前可选食物列表："),console.log(e);const n=e.reduce(((e,n)=>e+Number(n.weight)),0);if(0===n)return alert("当前时段所有可选食物的概率都为零。无法选择！"),null;const o=((e,n)=>{let o=Math.random()*n;for(const l of e)if(o-=Number(l.weight),o<=0)return l;return null})(e,n);if(o){const e=p.value.find((e=>e.name===o.name));e&&(console.log("选择了："),e.counts+=1,N(),console.log(e),console.log("目前的食物列表："),console.log(p.value),j(e.name))}return o};function F(){h.value=new Date}const{loadLog:S}=n();e("default",l({__name:"HomePage",setup:e=>(t((()=>{setInterval(F,1e3),S()})),(e,n)=>{const o=a("ion-title"),l=a("ion-toolbar"),t=a("ion-header");return c(),u(r(_),null,{default:s((()=>[i(t,null,{default:s((()=>[i(l,null,{default:s((()=>[i(o,null,{default:s((()=>n[1]||(n[1]=[g("主页")]))),_:1})])),_:1})])),_:1}),i(r(w),{style:{"padding-top":"20px"}},{default:s((()=>[i(r(d),null,{default:s((()=>[g(f(r(h)),1)])),_:1}),n[3]||(n[3]=m("br",null,null,-1)),i(r(v),{onClick:n[0]||(n[0]=e=>r(D)())},{default:s((()=>n[2]||(n[2]=[g("选择食物")]))),_:1}),n[4]||(n[4]=m("br",null,null,-1)),i(r(d),null,{default:s((()=>[g(f(r(x)(r(h))),1)])),_:1})])),_:1})])),_:1})})}))}}}));
