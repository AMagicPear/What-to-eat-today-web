System.register(["./index-legacy-DXLCKBZC.js","./foodConstructor-legacy-DfkAW2wq.js"],(function(e,l){"use strict";var n,t,o,a,u,s,c,i,r,g,v,d,m,f,h,w,_,p,y,b,j,x,k,C,L;return{setters:[e=>{n=e.r,t=e.c,o=e.t,a=e._,u=e.d,s=e.o,c=e.a,i=e.w,r=e.u,g=e.b,v=e.e,d=e.I,m=e.f,f=e.g,h=e.h,w=e.i,_=e.j,p=e.k,y=e.l,b=e.m,j=e.n,x=e.p,k=e.q},e=>{C=e.s,L=e.F}],execute:function(){var S=document.createElement("style");S.textContent="ion-note[data-v-2e6c47cf]{display:block}ion-button[data-v-2e6c47cf]{margin:18px 0}\n",document.head.appendChild(S);const D=n([]),F=()=>((async()=>{const e=await C.get("log");D.value=e?e.map((e=>({...e,time:new Date(e.time)}))):[],console.log("已读取记录"),console.log(D.value)})(),{saveLog:async e=>{const l={time:O.value,name:e};D.value.push(l),await C.set("log",JSON.parse(JSON.stringify(D.value))),console.log("成功保存记录")}}),N=Object.freeze(Object.defineProperty({__proto__:null,Log:F,logs:D},Symbol.toStringTag,{value:"Module"})),O=n(new Date),{foodList:I,loadFoods:P,saveFoods:E}=L(),{saveLog:H}=F(),J=t((()=>{const e=O.value.getHours();return e>=6&&e<9?"早":e>=9&&e<11?"早中":e>=11&&e<14?"午":"晚"})),M=async()=>{const e=await(async()=>{await P();const{isCheckBoxDisabled:e,checkedList:n}=await a((()=>l.import("./EditFood-legacy-Pfzh6S06.js")),void 0);let t=e.value?I.value:I.value.filter(((e,l)=>n.value[l]));console.log("第一次筛选后的食物："),console.log(t);const{logs:o}=await a((()=>Promise.resolve().then((()=>N))),void 0);return console.log("最后两项：",o.value[o.value.length-1].name,o.value[o.value.length-2].name),o.value.length>=2&&t.length>2&&o.value[o.value.length-1].name===o.value[o.value.length-2].name&&(t=t.filter((e=>e.name!==o.value[o.value.length-1].name))),console.log("第二次筛选后的食物："),console.log(t),t.map((e=>{let l=0;return l="早"===J.value?e.weight.morning:"早中"===J.value?(e.weight.morning+e.weight.noon)/2:"午"===J.value?e.weight.noon:e.weight.evening,{name:e.name,weight:l}}))})();console.log("正在选择食物，当前可选食物列表："),console.log(e);const n=e.reduce(((e,l)=>e+Number(l.weight)),0);if(console.log(`当前总重：${n}`),0===n)return await(await o.create({message:"当前时段所有可选食物的概率都为零，无法选择！",duration:2e3})).present(),null;const t=((e,l)=>{let n=Math.random()*l;for(const t of e)if(n-=Number(t.weight),n<=0)return t;return null})(e,n);if(t){const e=I.value.find((e=>e.name===t.name));e&&(console.log("选择了："),e.counts+=1,await E(),console.log(e),console.log("目前的食物列表："),console.log(I.value),await H(e.name))}return t};function q(){O.value=new Date}e("default",k(u({__name:"HomePage",setup(e){s((()=>{setInterval(q,6e4)}));const l=n();return(e,n)=>(g(),c(r(x),null,{default:i((()=>[v(r(h),null,{default:i((()=>[v(r(d),null,{default:i((()=>[v(r(m),null,{default:i((()=>n[1]||(n[1]=[f("今天吃什么")]))),_:1})])),_:1})])),_:1}),v(r(j),{class:"ion-padding"},{default:i((()=>[v(r(w),null,{default:i((()=>[f(_(r(O)),1)])),_:1}),v(r(p),{onClick:n[0]||(n[0]=e=>r(M)().then((e=>l.value=e)))},{default:i((()=>n[2]||(n[2]=[f("选择食物")]))),_:1}),n[4]||(n[4]=y("br",null,null,-1)),v(r(b),null,{default:i((()=>[f("今天的"+_(r(J))+"饭要吃的食物是：",1),n[3]||(n[3]=y("br",null,null,-1))])),_:1}),v(r(b),{style:{"text-align":"center"}},{default:i((()=>{var e;return[f(_(null===(e=l.value)||void 0===e?void 0:e.name),1)]})),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-2e6c47cf"]]))}}}));
