System.register(["./index-legacy-Dcsge-26.js","./foodConstructor-legacy-DuOnFM2i.js"],(function(e,l){"use strict";var n,a,t,o,u,s,i,r,c,g,v,d,m,f,h,w,_,p,y,b,j,x,k,C,L;return{setters:[e=>{n=e.r,a=e.c,t=e.t,o=e._,u=e.d,s=e.o,i=e.a,r=e.w,c=e.u,g=e.b,v=e.e,d=e.I,m=e.f,f=e.g,h=e.h,w=e.i,_=e.j,p=e.k,y=e.l,b=e.m,j=e.n,x=e.p,k=e.q},e=>{C=e.s,L=e.F}],execute:function(){var S=document.createElement("style");S.textContent="ion-note[data-v-f4882aa0]{display:block}ion-button[data-v-f4882aa0]{margin:18px 0}\n",document.head.appendChild(S);const D=n([]),F=()=>((async()=>{const e=await C.get("log");D.value=e?e.map((e=>({...e,time:new Date(e.time)}))):[],console.log("已读取记录"),console.log(D.value)})(),{saveLog:async e=>{const l={time:O.value,name:e};D.value.push(l),await C.set("log",JSON.parse(JSON.stringify(D.value))),console.log("成功保存记录")}}),N=Object.freeze(Object.defineProperty({__proto__:null,Log:F,logs:D},Symbol.toStringTag,{value:"Module"})),O=n(new Date),{foodList:I,loadFoods:P,saveFoods:E}=L(),{saveLog:H}=F(),J=a((()=>{const e=O.value.getHours();return e>=6&&e<9?"早":e>=9&&e<11?"早中":e>=11&&e<14?"午":"晚"})),M=async()=>{const e=await(async()=>{await P();const{isCheckBoxDisabled:e,checkedList:n}=await o((()=>l.import("./EditFood-legacy-BJ45cp_G.js")),void 0);let a=e.value?I.value:I.value.filter(((e,l)=>n.value[l]));console.log("第一次筛选后的食物："),console.log(a);const{logs:t}=await o((()=>Promise.resolve().then((()=>N))),void 0);return console.log("最后两项：",t.value[t.value.length-1].name,t.value[t.value.length-2].name),t.value.length>=2&&a.length>2&&t.value[t.value.length-1].name===t.value[t.value.length-2].name&&(a=a.filter((e=>e.name!==t.value[t.value.length-1].name))),console.log("第二次筛选后的食物："),console.log(a),a.map((e=>{let l=0;return l="早"===J.value?e.weight.morning:"早中"===J.value?(e.weight.morning+e.weight.noon)/2:"午"===J.value?e.weight.noon:e.weight.evening,{name:e.name,weight:l}}))})();console.log("正在选择食物，当前可选食物列表："),console.log(e);const n=e.reduce(((e,l)=>e+Number(l.weight)),0);if(console.log(`当前总重：${n}`),0===n)return await(await t.create({message:"当前时段所有可选食物的概率都为零，无法选择！",duration:2e3})).present(),null;const a=((e,l)=>{let n=Math.random()*l;for(const a of e)if(n-=Number(a.weight),n<=0)return a;return null})(e,n);if(a){const e=I.value.find((e=>e.name===a.name));e&&(console.log("选择了："),e.counts+=1,await E(),console.log(e),console.log("目前的食物列表："),console.log(I.value),await H(e.name))}return a};function q(){O.value=new Date}e("default",k(u({__name:"HomePage",setup(e){s((()=>{setInterval(q,6e4)}));const l=n();return(e,n)=>(g(),i(c(x),null,{default:r((()=>[v(c(h),null,{default:r((()=>[v(c(d),null,{default:r((()=>[v(c(m),null,{default:r((()=>n[1]||(n[1]=[f("今天吃什么")]))),_:1})])),_:1})])),_:1}),v(c(j),{class:"ion-padding"},{default:r((()=>[v(c(w),null,{default:r((()=>[f(_(c(O)),1)])),_:1}),v(c(p),{onClick:n[0]||(n[0]=e=>c(M)().then((e=>l.value=e)))},{default:r((()=>n[2]||(n[2]=[f("选择食物")]))),_:1}),n[4]||(n[4]=y("br",null,null,-1)),v(c(b),null,{default:r((()=>[f("今天的"+_(c(J))+"饭要吃的食物是：",1),n[3]||(n[3]=y("br",null,null,-1))])),_:1}),v(c(b),{style:{"text-align":"center"}},{default:r((()=>{var e;return[f(_(null===(e=l.value)||void 0===e?void 0:e.name),1)]})),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-f4882aa0"]]))}}}));
