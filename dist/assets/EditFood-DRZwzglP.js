import{d as $,r as f,o as T,a as I,w as l,u as e,b as m,e as n,I as L,f as D,g as s,h as O,s as R,v as c,m as b,x as d,y as A,z as H,A as P,F as V,n as z,B as W,l as G,i as S,C as j,D as h,E as q,G as J,H as K,J as Q,p as U,K as X,j as g,L as Y,M as Z,N as ee,O as N,P as oe,Q as ne,R as le,q as te}from"./index-BokRhfYY.js";import{F as ae}from"./foodConstructor-BKzKWhPT.js";const{foodList:r,addFood:se,loadFoods:ie,deleteFood:de,saveFoods:re}=ae(),i=f(null),u=f([]),_=f(!0),ue=$({__name:"EditFood",setup(ge){const C="TIP：点击右侧+号添加食物 滑动来编辑或删除<br/>所占权重越大，食物被选中的几率更高",p=f(!1),k=[{text:"取消",role:"cancel",handler:()=>{i.value=null,console.log("已取消添加食物")}},{text:"添加",handler:async o=>o.foodName&&o.foodWeightMorning&&o.foodWeightNoon&&o.foodWeightEvening?o.foodWeightMorning<0||o.foodWeightNoon<0||o.foodWeightEvening<0?(i.value="权重不能是负数！",!1):(console.log("准备添加食物".concat(o.foodName)),await se(o.foodName,{morning:o.foodWeightMorning,noon:o.foodWeightNoon,evening:o.foodWeightEvening})?(i.value="".concat(o.foodName,"添加成功！"),!0):!1):(console.log("食物未输入"),i.value="请输入食物名称和权重后再提交",!1)}],y=[{name:"foodName",placeholder:"食物名称"},{name:"foodWeightMorning",type:"number",placeholder:"权重：早",min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重：午",min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重：晚",min:0}],w=async o=>{console.log("正在编辑食物"),await(await le.create({header:"编辑食物",inputs:[{name:"foodName",placeholder:"食物名称",value:o.name},{name:"foodWeightMorning",type:"number",placeholder:"权重",value:o.weight.morning,min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重",value:o.weight.noon,min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重",value:o.weight.evening,min:0}],buttons:[{text:"取消",role:"cancel"},{text:"保存",handler:async a=>{a.foodName&&a.foodWeightMorning&&a.foodWeightNoon&&a.foodWeightEvening&&(o.name=a.foodName,o.weight.morning=a.foodWeightMorning,o.weight.noon=a.foodWeightNoon,o.weight.evening=a.foodWeightEvening)}}]})).present()};T(()=>{ie().then(()=>{console.log("加载食物列表："),console.log(r.value),u.value=new Array(r.value.length).fill(!1)})});const x=o=>{console.log("".concat(r.value[o.detail.from].name,"移到了位置").concat(o.detail.to));const t=u.value.splice(o.detail.from,1)[0];u.value.splice(o.detail.to,0,t),r.value=o.detail.complete(r.value),re()},F=o=>{p.value=!o.detail.checked},E=o=>{_.value=!o.detail.checked},B=(o,t)=>{u.value[o]=!u.value[o],console.log("".concat(t," 已").concat(u.value[o]?"选中":"取消勾选","."))};return(o,t)=>(m(),I(e(U),null,{default:l(()=>[n(e(O),null,{default:l(()=>[n(e(L),null,{default:l(()=>[n(e(D),null,{default:l(()=>t[2]||(t[2]=[s("编辑食物信息")])),_:1})]),_:1})]),_:1}),n(e(z),null,{default:l(()=>[n(e(R),{inset:!0},{default:l(()=>[n(e(c),{style:{"font-weight":"bold"}},{default:l(()=>[n(e(b),null,{default:l(()=>t[3]||(t[3]=[s("食物")])),_:1}),n(e(d),{slot:"end"},{default:l(()=>t[4]||(t[4]=[s("所占权重")])),_:1}),n(e(d),{slot:"end",color:"secondary"},{default:l(()=>t[5]||(t[5]=[s("已选次数")])),_:1})]),_:1}),n(e(A),{disabled:p.value,onIonItemReorder:t[0]||(t[0]=a=>x(a))},{default:l(()=>[(m(!0),H(V,null,P(e(r),(a,M)=>(m(),I(e(X),{key:a.name},{default:l(()=>[n(e(c),null,{default:l(()=>[n(e(b),null,{default:l(()=>[s(g(a.name),1)]),_:2},1024),n(e(Y),{slot:"end",disabled:_.value,onIonChange:v=>B(M,a.name)},null,8,["disabled","onIonChange"]),n(e(Z),{slot:"end"}),n(e(d),{slot:"end"},{default:l(()=>[s("早 "+g(a.weight.morning),1)]),_:2},1024),n(e(d),{slot:"end"},{default:l(()=>[s("午 "+g(a.weight.noon),1)]),_:2},1024),n(e(d),{slot:"end"},{default:l(()=>[s("晚 "+g(a.weight.evening),1)]),_:2},1024),n(e(d),{slot:"end",color:"secondary"},{default:l(()=>[s(g(a.counts),1)]),_:2},1024)]),_:2},1024),n(e(ee),{side:"end"},{default:l(()=>[n(e(N),{onClick:v=>w(a)},{default:l(()=>[n(e(h),{slot:"end",icon:e(oe)},null,8,["icon"]),t[6]||(t[6]=s("编辑"))]),_:2},1032,["onClick"]),n(e(N),{color:"danger",expandable:"",onClick:v=>e(de)(a.name)},{default:l(()=>[n(e(h),{slot:"end",icon:e(ne)},null,8,["icon"]),t[7]||(t[7]=s("删除"))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["disabled"])]),_:1})]),_:1}),n(e(c),null,{default:l(()=>[n(e(W),{class:"ion-padding","enable-on-off-labels":!0,checked:!0,onIonChange:F},{default:l(()=>t[8]||(t[8]=[s("开启排序")])),_:1}),n(e(W),{class:"ion-padding","enable-on-off-labels":!0,checked:!1,onIonChange:E},{default:l(()=>t[9]||(t[9]=[s("开启选择")])),_:1})]),_:1}),n(e(S),{class:"ion-padding",style:{"text-align":"center"}},{default:l(()=>[G("span",{innerHTML:C})]),_:1}),n(e(J),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"add-button"},{default:l(()=>[n(e(j),null,{default:l(()=>[n(e(h),{icon:e(q)},null,8,["icon"])]),_:1})]),_:1}),n(e(K),{header:"添加食物",trigger:"add-button",buttons:k,inputs:y}),n(e(Q),{"is-open":i.value,message:i.value,duration:2e3,onDidDismiss:t[1]||(t[1]=a=>i.value=null)},null,8,["is-open","message"])]),_:1}))}}),ce=te(ue,[["__scopeId","data-v-595df5e0"]]);export{u as checkedList,ce as default,_ as isCheckBoxDisabled,i as message};
