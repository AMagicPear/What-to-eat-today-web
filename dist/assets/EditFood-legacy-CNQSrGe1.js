System.register(["./index-legacy-CfgSHEVM.js","./foodConstructor-legacy-BMJw1mud.js"],(function(e,o){"use strict";var n,l,t,a,d,i,u,s,g,c,f,r,h,m,v,_,p,b,W,y,N,w,x,k,C,E,M,F,I,$,j,D,L,z,H,P,T,q,A,B,G,J;return{setters:[e=>{n=e.d,l=e.r,t=e.o,a=e.a,d=e.w,i=e.u,u=e.b,s=e.e,g=e.I,c=e.f,f=e.g,r=e.h,h=e.q,m=e.s,v=e.m,_=e.v,p=e.x,b=e.y,W=e.z,y=e.F,N=e.n,w=e.A,x=e.l,k=e.i,C=e.B,E=e.C,M=e.D,F=e.E,I=e.G,$=e.H,j=e.p,D=e.J,L=e.j,z=e.K,H=e.L,P=e.M,T=e.N,q=e.O,A=e.P,B=e.Q,G=e._},e=>{J=e.F}],execute:function(){var o=document.createElement("style");o.textContent="#add-button[data-v-80004055]{margin:2vw}ion-note[data-v-80004055]{display:block}\n",document.head.appendChild(o);const{foodList:K,addFood:O,loadFoods:Q,deleteFood:R,saveFoods:S}=J(),U=e("message",l(null));e("default",G(n({__name:"EditFood",setup(e){const o=l(!1),n=l(!0),G=[{text:"取消",role:"cancel",handler:()=>{U.value=null,console.log("已取消添加食物")}},{text:"添加",handler:async e=>e.foodName&&e.foodWeightMorning&&e.foodWeightNoon&&e.foodWeightEvening?e.foodWeightMorning<0||e.foodWeightNoon<0||e.foodWeightEvening<0?(U.value="权重不能是负数！",!1):(console.log(`准备添加食物${e.foodName}`),!!(await O(e.foodName,{morning:e.foodWeightMorning,noon:e.foodWeightNoon,evening:e.foodWeightEvening}))&&(U.value=`${e.foodName}添加成功！`,!0)):(console.log("食物未输入"),U.value="请输入食物名称和权重后再提交",!1)}],J=[{name:"foodName",placeholder:"食物名称"},{name:"foodWeightMorning",type:"number",placeholder:"权重：早",min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重：午",min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重：晚",min:0}];t((()=>{Q().then((()=>{console.log("加载食物列表："),console.log(K.value)}))}));const V=e=>{o.value=!e.detail.checked},X=e=>{n.value=!e.detail.checked};return(e,l)=>(u(),a(i(j),null,{default:d((()=>[s(i(r),null,{default:d((()=>[s(i(g),null,{default:d((()=>[s(i(c),null,{default:d((()=>l[2]||(l[2]=[f("编辑食物信息")]))),_:1})])),_:1})])),_:1}),s(i(N),null,{default:d((()=>[s(i(h),{inset:!0},{default:d((()=>[s(i(m),{style:{"font-weight":"bold"}},{default:d((()=>[s(i(v),null,{default:d((()=>l[3]||(l[3]=[f("食物")]))),_:1}),s(i(_),{slot:"end"},{default:d((()=>l[4]||(l[4]=[f("所占权重")]))),_:1}),s(i(_),{slot:"end",color:"secondary"},{default:d((()=>l[5]||(l[5]=[f("已选次数")]))),_:1})])),_:1}),s(i(p),{disabled:o.value,onIonItemReorder:l[0]||(l[0]=e=>{return o=e,console.log(`${K.value[o.detail.from].name}移到了位置${o.detail.to}`),K.value=o.detail.complete(K.value),void S();var o})},{default:d((()=>[(u(!0),b(y,null,W(i(K),(e=>(u(),a(i(D),{key:e.name},{default:d((()=>[s(i(m),null,{default:d((()=>[s(i(v),null,{default:d((()=>[f(L(e.name),1)])),_:2},1024),s(i(z),{slot:"end",disabled:n.value},null,8,["disabled"]),s(i(H),{slot:"end"}),s(i(_),{slot:"end"},{default:d((()=>[f("早 "+L(e.weight.morning),1)])),_:2},1024),s(i(_),{slot:"end"},{default:d((()=>[f("午 "+L(e.weight.noon),1)])),_:2},1024),s(i(_),{slot:"end"},{default:d((()=>[f("晚 "+L(e.weight.evening),1)])),_:2},1024),s(i(_),{slot:"end",color:"secondary"},{default:d((()=>[f(L(e.counts),1)])),_:2},1024)])),_:2},1024),s(i(P),{side:"end"},{default:d((()=>[s(i(T),{onClick:o=>(async e=>{console.log("正在编辑食物");const o=await B.create({header:"编辑食物",inputs:[{name:"foodName",placeholder:"食物名称",value:e.name},{name:"foodWeightMorning",type:"number",placeholder:"权重",value:e.weight.morning,min:0},{name:"foodWeightNoon",type:"number",placeholder:"权重",value:e.weight.noon,min:0},{name:"foodWeightEvening",type:"number",placeholder:"权重",value:e.weight.evening,min:0}],buttons:[{text:"取消",role:"cancel"},{text:"保存",handler:async o=>{o.foodName&&o.foodWeightMorning&&o.foodWeightNoon&&o.foodWeightEvening&&(e.name=o.foodName,e.weight.morning=o.foodWeightMorning,e.weight.noon=o.foodWeightNoon,e.weight.evening=o.foodWeightEvening)}}]});await o.present()})(e)},{default:d((()=>[s(i(E),{slot:"end",icon:i(q)},null,8,["icon"]),l[6]||(l[6]=f("编辑"))])),_:2},1032,["onClick"]),s(i(T),{color:"danger",expandable:"",onClick:o=>i(R)(e.name)},{default:d((()=>[s(i(E),{slot:"end",icon:i(A)},null,8,["icon"]),l[7]||(l[7]=f("删除"))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["disabled"])])),_:1})])),_:1}),s(i(m),null,{default:d((()=>[s(i(w),{class:"ion-padding","enable-on-off-labels":!0,checked:!0,onIonChange:V},{default:d((()=>l[8]||(l[8]=[f("开启排序")]))),_:1}),s(i(w),{class:"ion-padding","enable-on-off-labels":!0,checked:!1,onIonChange:X},{default:d((()=>l[9]||(l[9]=[f("开启选择")]))),_:1})])),_:1}),s(i(k),{class:"ion-padding",style:{"text-align":"center"}},{default:d((()=>[x("span",{innerHTML:"TIP：点击右侧+号添加食物 滑动来编辑或删除<br/>所占权重越大，食物被选中的几率更高"})])),_:1}),s(i(F),{slot:"fixed",vertical:"bottom",horizontal:"end",id:"add-button"},{default:d((()=>[s(i(C),null,{default:d((()=>[s(i(E),{icon:i(M)},null,8,["icon"])])),_:1})])),_:1}),s(i(I),{header:"添加食物",trigger:"add-button",buttons:G,inputs:J}),s(i($),{"is-open":U.value,message:U.value,duration:2e3,onDidDismiss:l[1]||(l[1]=e=>U.value=null)},null,8,["is-open","message"])])),_:1}))}}),[["__scopeId","data-v-80004055"]]))}}}));
