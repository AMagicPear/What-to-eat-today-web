System.register(["./index-legacy-DtAbD21u.js","./foodConstructor-legacy-B1744KNQ.js"],(function(e,t){"use strict";var n,l,o,a,u,s,c,r,d,i,g,f,v,m,_,y,p,w,h,b,x,L;return{setters:[e=>{n=e.r,l=e.d,o=e.o,a=e.c,u=e.w,s=e.u,c=e.a,r=e.b,d=e.I,i=e.e,g=e.f,f=e.g,v=e.h,m=e.t,_=e.i,y=e.j,p=e.k,w=e.l,h=e.m,b=e._},e=>{x=e.s,L=e.F}],execute:function(){var t=document.createElement("style");t.textContent="ion-note[data-v-30fc3824]{display:block}ion-button[data-v-30fc3824]{margin:18px 0}\n",document.head.appendChild(t);const C=()=>{const e=n([]);return{saveLog:async t=>{const n={time:N.value,name:t};e.value.push(n),await x.set("log",JSON.parse(JSON.stringify(e.value))),console.log("成功保存记录")},loadLog:async()=>{const t=await x.get("log");e.value=t?t.map((e=>({...e,time:new Date(e.time)}))):[],console.log("已读取记录"),console.log(e.value)}}},N=n(new Date),{foodList:j,loadFoods:k,saveFoods:D}=L(),{saveLog:F}=C(),I=async()=>{const e=await(async()=>(await k(),j.value))();console.log("正在选择食物，当前可选食物列表："),console.log(e);const t=e.reduce(((e,t)=>e+Number(t.weight)),0);if(0===t)return alert("当前时段所有可选食物的概率都为零。无法选择！"),null;const n=((e,t)=>{let n=Math.random()*t;for(const l of e)if(n-=Number(l.weight),n<=0)return l;return null})(e,t);if(n){const e=j.value.find((e=>e.name===n.name));e&&(console.log("选择了："),e.counts+=1,D(),console.log(e),console.log("目前的食物列表："),console.log(j.value),F(e.name))}return n};function S(){N.value=new Date}const{loadLog:J}=C();e("default",b(l({__name:"HomePage",setup(e){o((()=>{setInterval(S,1e3),J()}));const t=n();return(e,n)=>(c(),a(s(h),null,{default:u((()=>[r(s(f),null,{default:u((()=>[r(s(d),null,{default:u((()=>[r(s(i),null,{default:u((()=>n[1]||(n[1]=[g("今天吃什么")]))),_:1})])),_:1})])),_:1}),r(s(w),{class:"ion-padding"},{default:u((()=>[r(s(v),null,{default:u((()=>[g(m(s(N)),1)])),_:1}),r(s(_),{onClick:n[0]||(n[0]=e=>s(I)().then((e=>t.value=e)))},{default:u((()=>n[2]||(n[2]=[g("选择食物")]))),_:1}),n[4]||(n[4]=y("br",null,null,-1)),r(s(p),null,{default:u((()=>n[3]||(n[3]=[g("今天要吃的食物是： ")]))),_:1}),r(s(p),{style:{"text-align":"center"}},{default:u((()=>{var e;return[g(m(null===(e=t.value)||void 0===e?void 0:e.name),1)]})),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-30fc3824"]]))}}}));
